#
# site: http://www.paragon-re.com/SF_Demographics/
# image: http://my.paragon-re.com/Docs/General/SixtyFortyImages/Zip-Code_Demographics_Table_Complete.jpg
# source: U.S. Census 2008-2013

zmap = {
	"SF": {
		"population": 837000,
		"median_income": 73800,
		"median_age": 39,
		"home_ownership": 0.37,
		"youth": 0.14,
		"foreign_born": 0.36,
		"household_size": 2.3
	},
	"94105": {
		"population": 6000,
		"median_income": 142400,
		"median_age": 36,
		"home_ownership": 0.45,
		"youth": 0.06,
		"foreign_born": 0.31,
		"household_size": 1.6
	},
	"94127": {
		"population": 19300,
		"median_income": 128100,
		"median_age": 45,
		"home_ownership": 0.82,
		"youth": 0.19,
		"foreign_born": 0.22,
		"household_size": 2.6
	},
	"94129": {
		"population": 3200,
		"median_income": 121300,
		"median_age": 31,
		"home_ownership": 0,
		"youth": 0.22,
		"foreign_born": 0.16,
		"household_size": 2.9
	},
	"94107": {
		"population": 26700,
		"median_income": 117600,
		"median_age": 37,
		"home_ownership": 0.39,
		"youth": 0.12,
		"foreign_born": 0.34,
		"household_size": 1.9
	},
	"94114": {
		"population": 31200,
		"median_income": 115700,
		"median_age": 41,
		"home_ownership": 0.45,
		"youth": 0.1,
		"foreign_born": 0.19,
		"household_size": 1.9
	},
	"94123": {
		"population": 23100,
		"median_income": 107200,
		"median_age": 36,
		"home_ownership": 0.31,
		"youth": 0.1,
		"foreign_born": 0.18,
		"household_size": 1.7
	},
	"94131": {
		"population": 26900,
		"median_income": 94800,
		"median_age": 42,
		"home_ownership": 0.55,
		"youth": 0.13,
		"foreign_born": 0.22,
		"household_size": 2.1
	},
	"94111": {
		"population": 3700,
		"median_income": 93400,
		"median_age": 50,
		"home_ownership": 0.22,
		"youth": 0.06,
		"foreign_born": 0.39,
		"household_size": 1.6
	},
	"94117": {
		"population": 39169,
		"median_income": 91300,
		"median_age": 33,
		"home_ownership": 0.29,
		"youth": 0.09,
		"foreign_born": 0.19,
		"household_size": 2.0
	},
	"94116": {
		"population": 43700,
		"median_income": 82600,
		"median_age": 44,
		"home_ownership": 0.67,
		"youth": 0.16,
		"foreign_born": 0.44,
		"household_size": 2.8
	},
	"94118": {
		"population": 38300,
		"median_income": 81500,
		"median_age": 38,
		"home_ownership": 0.35,
		"youth": 0.14,
		"foreign_born": 0.3,
		"household_size": 2.2
	},
	"94110": {
		"population": 69400,
		"median_income": 79500,
		"median_age": 36,
		"home_ownership": 0.34,
		"youth": 0.14,
		"foreign_born": 0.35,
		"household_size": 2.5
	},
	"94122": {
		"population": 56000,
		"median_income": 77900,
		"median_age": 39,
		"home_ownership": 0.45,
		"youth": 0.14,
		"foreign_born": 0.41,
		"household_size": 2.5
	},
	"94115": {
		"population": 33000,
		"median_income": 73800,
		"median_age": 38,
		"home_ownership": 0.24,
		"youth": 0.11,
		"foreign_born": 0.25,
		"household_size": 1.9
	},
	"94121": {
		"population": 41200,
		"median_income": 72400,
		"median_age": 40,
		"home_ownership": 0.40,
		"youth": 0.15,
		"foreign_born": 0.43,
		"household_size": 2.4
	},
	"94112": {
		"population": 79400,
		"median_income": 72400,
		"median_age": 41,
		"home_ownership": 0.63,
		"youth": 0.18,
		"foreign_born": 0.54,
		"household_size": 3.6
	},
	"94132": {
		"population": 28200,
		"median_income": 67900,
		"median_age": 34,
		"home_ownership": 0.42,
		"youth": 0.13,
		"foreign_born": 0.41,
		"household_size": 2.6
	},
	"94134": {
		"population": 40800,
		"median_income": 59700,
		"median_age": 40,
		"home_ownership": 0.60,
		"youth": 0.21,
		"foreign_born": 0.46,
		"household_size": 3.6
	},
	"94109": {
		"population": 56000,
		"median_income": 58900,
		"median_age": 37,
		"home_ownership": 0.15,
		"youth": 0.06,
		"foreign_born": 0.31,
		"household_size": 1.6
	},
	"94133": {
		"population": 26300,
		"median_income": 46800,
		"median_age": 41,
		"home_ownership": 0.17,
		"youth": 0.09,
		"foreign_born": 0.51,
		"household_size": 1.9
	},
	"94124": {
		"population": 34000,
		"median_income": 46700,
		"median_age": 33,
		"home_ownership": 0.49,
		"youth": 0.25,
		"foreign_born": 0.33,
		"household_size": 3.5
	},
	"94103": {
		"population": 27200,
		"median_income": 44100,
		"median_age": 40,
		"home_ownership": 0.17,
		"youth": 0.09,
		"foreign_born": 0.33,
		"household_size": 1.9
	},
	"94130": {
		"population": 2900,
		"median_income": 36600,
		"median_age": 28,
		"home_ownership": 0,
		"youth": 0.19,
		"foreign_born": 0.23,
		"household_size": 3.3
	},
	"94108": {
		"population": 13800,
		"median_income": 34000,
		"median_age": 47,
		"home_ownership": 0.09,
		"youth": 0.08,
		"foreign_born": 0.57,
		"household_size": 1.8
	},
	"94102": {
		"population": 31200,
		"median_income": 22300,
		"median_age": 42,
		"home_ownership": 0.07,
		"youth": 0.09,
		"foreign_born": 0.31,
		"household_size": 1.7
	}
}
rcset = set()

def getRentControl():
	if not len(list(rcset)):
		import os
		from cantools.util import read, log
		log("Parsing Rent Control Data", important=True)
		rcd = read(os.path.join("scrapers", "data", "rent_control.geojson"),
			isjson=True)["features"]
		for z in zmap:
			zmap[z]["rent_control"] = 0
		rcp = [rc["properties"] for rc in rcd if rc["properties"]["address"]]
		log("using %s of %s rows (omitting blank entries)"%(len(rcp), len(rcd)), 1)
		for d in rcp:
			zc = d["zipcode"]
			rcset.add(d["address"])
			if not zc in zmap:
				zmap[zc] = {
					"rent_control": 0,
					"ad_hoc": True
				}
			zmap[zc]["rent_control"] += 1
			zmap["SF"]["rent_control"] += 1
	return rcset

def getMap():
	getRentControl() # initialize rc data (regional counts)
	for dset in zmap.values():
		dset["total"] = dset.get("total", { "fires": 0, "people": 0, "units": 0 })
	return zmap